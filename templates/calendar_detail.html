{% extends 'family_base.html' %}

{% block family_content %}

    <h2>{{ current_calendar.name }}</h2>

    <form action="{% url 'calendar_detail' family_slug=family.slug calendar_pk=current_calendar.id %}" method="post">
        {% csrf_token %}
        <label for="year">Year:</label>
        <input type="text" name="year" id="year" value="{% now "Y" %}">

        <label for="month">Month:</label>
        <select name="month" id="month">
        {% for month_number, month_name in months_all.items %}
            <option value="{{ month_number }}"
                    {% if month_number == month %}
                        selected
                    {% endif %}
            >{{ month_name }}</option>
        {% endfor %}

        </select>
        <input type="submit" value="Go to selected date">
    </form>


    <ul>
        {% for day in day_data %}
            <li {% if day.day_number|divisibleby:2 %} style="background: papayawhip" {% endif %} >
                <b>{{ day.day_number }} - {{ day.day_of_week }}</b>
                <a href="{% url 'event_create' family_slug=family.slug calendar_pk=current_calendar.id year=year month=month day=day.day_number %}">+ New event</a>
                <br>
                {% for event in day.events %}
                    <p>
                        {% if event.is_important %}
                            !!!
                        {% endif %}
                        |
                        {% if event.is_all_day %}
                            all day
                        {% else %}
                            {{ event.date|date:"H:i" }}
                        {% endif %}
                        - {{ event.title }}
                        {% if event.description %}
                            {{ event.description }}
                        {% endif %}
                    </p>
                {% empty %}
                {% endfor %}

            </li>
        {% endfor %}
    </ul>


{% endblock %}